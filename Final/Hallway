#pragma config(I2C_Usage, I2C1, i2cSensors)
#pragma config(Sensor, in1,    armAngle,       sensorPotentiometer)
#pragma config(Sensor, dgtl3,  armLimit,       sensorTouch)
#pragma config(Sensor, dgtl7,  sonarRight,     sensorSONAR_inch)
#pragma config(Sensor, dgtl9,  sonarLeft,      sensorSONAR_inch)
#pragma config(Sensor, dgtl11, sonarFront,     sensorSONAR_inch)
#pragma config(Motor,  port1,           leftDrive,     tmotorVex393, openLoop, reversed, encoder, encoderPort, I2C_1, 1000)
#pragma config(Motor,  port7,           armDrive,      tmotorVex393, openLoop)
#pragma config(Motor,  port10,          rightDrive,    tmotorVex393, openLoop, reversed, encoder, encoderPort, I2C_2, 1000)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

// Call this function to have the robot travel down the hallway.
void travelHallway()
{
	// We need to keep the robot in the middle of the hallway. To do that, we will use the three sonars on our robot.
	// The front, left, and right sonars will be used.
	// Front: To determine if we have reached the end of the hall or not.
	// Left: To ensure we are the same distance away from the left wall as the right wall.
	// Right: To ensure we are the same distance away from the right wall as the left wall.
	// We will 60 for the normal speed.
	// We will use 70 for the slightly higher speed.

	// Holds the current speed of each motor.
	int leftMotorSpeed;
	int rightMotorSpeed;

	// Set arm to be parallel with the ground.
	setArm(25);

	// Set the initial motor speeds;
	leftMotorSpeed = -80;
	rightMotorSpeed = -80;

	// Travel down the hallway forever.
	while(true)
	{
		// If we are about to hit something, back up so we can continue to move.
		if(SensorValue[sonarFront] < 10 || SensorValue[sonarFront] == -1)
		{
			// Move the robot backwards.
			motor[leftDrive] = 40;
			motor[rightDrive] = 40;
			
			// Back up for 2.5 seconds.
			wait1Msec(2500);
			
			// Stop moving the robot.
			motor[leftDrive] = 0;
			motor[rightDrive] = 0;
		}
	
		// If the sonar values are the same.
		else if(SensorValue[sonarLeft] == SensorValue[sonarRight])
		{
			// Set the motor speeds to the same value
			leftMotorSpeed = -30;
			rightMotorSpeed = -30;
		}
		// If the left sonar value is greater than the right sonar value, we are closer to the right wall.
		else if(SensorValue[sonarLeft] > SensorValue[sonarRight])
		{
			// Set the left motor speed slightly higher. This should let the robot drift to the left.
			leftMotorSpeed = -80;
			rightMotorSpeed = -30;
		}
		// If the right sonar value is greater than the left sonar value, we are closer to the left wall.
		else if(SensorValue[sonarRight] > SensorValue[sonarLeft])
		{
			// Set the right motor speed slightly higher. This should let the robot drift to the right.
			leftMotorSpeed = -30;
			rightMotorSpeed = -80;
		}

		// Move forward using the speed variables for each motor.
		motor[leftDrive] = leftMotorSpeed;
		motor[rightDrive] = rightMotorSpeed;
	}

	// Stop moving the robot
	motor[leftDrive] = 0;
	motor[rightDrive] = 0;
}

task main()
{
	// Travel down the hallway.
	travelHallway();
}
